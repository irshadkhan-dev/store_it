import { serverFnFetcher } from "@tanstack/start-server-functions-fetcher";
import { mergeHeaders } from "@tanstack/start-client";
import { getHeaders } from "@tanstack/start-server";
function sanitizeBase(base) {
  return base.replace(/^\/|\/$/g, "");
}
const createSsrRpc = (functionId, serverBase) => {
  const url = `/${sanitizeBase(serverBase)}/${functionId}`;
  const ssrFn = (...args) => {
    return serverFnFetcher(url, args, async (url2, requestInit) => {
      requestInit.headers = mergeHeaders(getHeaders(), requestInit.headers);
      return $fetch.native(url2, requestInit);
    });
  };
  return Object.assign(ssrFn, {
    url,
    functionId
  });
};
export {
  createSsrRpc
};
//# sourceMappingURL=index.js.map
