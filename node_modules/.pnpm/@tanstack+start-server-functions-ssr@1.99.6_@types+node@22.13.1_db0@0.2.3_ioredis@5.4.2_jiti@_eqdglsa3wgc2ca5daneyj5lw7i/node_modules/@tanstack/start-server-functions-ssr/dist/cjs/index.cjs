"use strict";
Object.defineProperty(exports, Symbol.toStringTag, { value: "Module" });
const startServerFunctionsFetcher = require("@tanstack/start-server-functions-fetcher");
const startClient = require("@tanstack/start-client");
const startServer = require("@tanstack/start-server");
function sanitizeBase(base) {
  return base.replace(/^\/|\/$/g, "");
}
const createSsrRpc = (functionId, serverBase) => {
  const url = `/${sanitizeBase(serverBase)}/${functionId}`;
  const ssrFn = (...args) => {
    return startServerFunctionsFetcher.serverFnFetcher(url, args, async (url2, requestInit) => {
      requestInit.headers = startClient.mergeHeaders(startServer.getHeaders(), requestInit.headers);
      return $fetch.native(url2, requestInit);
    });
  };
  return Object.assign(ssrFn, {
    url,
    functionId
  });
};
exports.createSsrRpc = createSsrRpc;
//# sourceMappingURL=index.cjs.map
